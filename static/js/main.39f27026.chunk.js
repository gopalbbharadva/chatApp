(this.webpackJsonpchatapp=this.webpackJsonpchatapp||[]).push([[0],{28:function(e,t,a){},29:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var c=a(4),r=a.n(c),s=a(23),n=a.n(s),i=(a(28),a(11)),o=(a(29),a(9));o.a.initializeApp({apiKey:"AIzaSyBlFW3zs_X7R_0WupC0zmC3O6DaOJTCHdY",authDomain:"chatapp-c7ee6.firebaseapp.com",projectId:"chatapp-c7ee6",storageBucket:"chatapp-c7ee6.appspot.com",messagingSenderId:"827528465083",appId:"1:827528465083:web:977ae405e629a35ead379e"});o.a.firestore(),a(33);var l=a(13),j=a(19),u=a(16),d=a.n(u),h=a(20),b=a(17),m=a(15),p=a(3);var O=function(e){var t=e.message.uid===o.a.auth().currentUser.uid?"sent":"received",a=e.message.createdAt,c=new Date(1e3*a),r=c.getHours()+":"+c.getMinutes();return Object(p.jsx)("div",{children:Object(p.jsx)("div",{className:"message ".concat(t),children:Object(p.jsxs)("div",{className:"msg",children:[Object(p.jsx)("p",{style:{margin:"0",padding:"0.5rem",fontSize:"0.9rem"},children:e.message.msg}),Object(p.jsx)("small",{className:"msgTime",children:r})]})})})};var g=function(){var e=Object(c.useRef)(),t=o.a.auth(),a=Object(c.useState)(""),r=Object(i.a)(a,2),s=r[0],n=r[1],l=o.a.firestore().collection("chats"),u=l.orderBy("createdAt").limit(30),g=Object(j.a)(u,{idField:"id"}),x=Object(i.a)(g,1)[0],f=function(){var a=Object(h.a)(d.a.mark((function a(c){var r,i,j;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c.preventDefault(),r=t.currentUser,i=r.uid,j=r.photoURL,a.next=4,l.add({msg:s,createdAt:o.a.firestore.FieldValue.serverTimestamp(),uid:i,photoURL:j});case 4:n(""),e.current.scrollIntoView({behaviour:"smooth"});case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return Object(p.jsxs)("div",{children:[Object(p.jsxs)("main",{children:[x&&x.map((function(e,a){return Object(p.jsx)(O,{photoRef:t.currentUser.photoURL,message:e},a)})),Object(p.jsx)("div",{ref:e})]}),Object(p.jsxs)("form",{onSubmit:f,children:[Object(p.jsx)("button",{className:"sendImage",children:Object(p.jsx)(b.a,{icon:m.b,style:{height:"1.5rem",width:"1.5rem",color:"#9CA3AF"}})}),Object(p.jsx)("input",{className:"inputChat",value:s,type:"text",onChange:function(e){return n(e.target.value)},placeholder:"Type something..."}),Object(p.jsx)("button",{className:"submitBtn",type:"submit",children:Object(p.jsx)(b.a,{style:{height:"1.5rem",width:"1.5rem",color:"#10B981"},icon:m.a})})]})]})};var x=function(){var e=o.a.auth();return Object(p.jsx)("div",{children:Object(p.jsx)("button",{onClick:function(){var t=new o.a.auth.GoogleAuthProvider;e.signInWithPopup(t)},children:"  Google signin"})})};var f=function(e){var t=o.a.auth(),a=Object(l.a)(t),c=Object(i.a)(a,1)[0];return Object(p.jsxs)("div",{style:{display:"flex"},children:[Object(p.jsx)("img",{className:"profileImage",src:c.photoURL,alt:"sorry not available"}),Object(p.jsx)("p",{style:{color:"black"},children:c.displayName}),t.currentUser&&Object(p.jsx)("button",{className:"logoutBtn",onClick:function(){window.confirm("Are you sure you want to logout ".concat(c.displayName))&&t.signOut()},children:Object(p.jsx)(b.a,{style:{height:"1.5rem",width:"1.5rem",marginRight:"1rem"},icon:m.c})})]})},v=(a.p,function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),a=t[0],r=t[1],s=o.a.auth(),n=Object(l.a)(s),j=Object(i.a)(n,1)[0];return o.a.firestore().collection("users").onSnapshot((function(e){r(e.docs.map((function(e){return e.data().displayname})))})),Object(p.jsx)("div",{children:a.map((function(e,t){return Object(p.jsxs)("div",{className:"user",children:[Object(p.jsx)("img",{className:"profileImage",src:j.photoURL,alt:"sorry"}),Object(p.jsx)("p",{style:{marginLeft:"1rem",color:"black"},children:e})]},t)}))})});var y=function(){var e=o.a.auth(),t=Object(l.a)(e),a=Object(i.a)(t,1)[0];return Object(p.jsx)("div",{className:"container",children:a?Object(p.jsxs)("div",{className:"App",children:[Object(p.jsx)("div",{className:"allUsers",children:Object(p.jsx)(v,{})}),Object(p.jsxs)("div",{className:"userChat",children:[Object(p.jsx)("header",{children:Object(p.jsx)(f,{currentUser:a})}),Object(p.jsx)("section",{children:a?Object(p.jsx)(g,{}):Object(p.jsx)(x,{})})]})]}):Object(p.jsx)(x,{})})},N=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,41)).then((function(t){var a=t.getCLS,c=t.getFID,r=t.getFCP,s=t.getLCP,n=t.getTTFB;a(e),c(e),r(e),s(e),n(e)}))};n.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(y,{})}),document.getElementById("root")),N()}},[[40,1,2]]]);
//# sourceMappingURL=main.39f27026.chunk.js.map