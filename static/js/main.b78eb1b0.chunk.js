(this.webpackJsonpchatapp=this.webpackJsonpchatapp||[]).push([[0],{28:function(e,t,a){},29:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var c=a(4),s=a.n(c),n=a(23),r=a.n(n),i=(a(28),a(10)),o=(a(29),a(9));o.a.initializeApp({apiKey:"AIzaSyBlFW3zs_X7R_0WupC0zmC3O6DaOJTCHdY",authDomain:"chatapp-c7ee6.firebaseapp.com",projectId:"chatapp-c7ee6",storageBucket:"chatapp-c7ee6.appspot.com",messagingSenderId:"827528465083",appId:"1:827528465083:web:977ae405e629a35ead379e"});o.a.firestore(),a(33);var l=a(14),j=a(19),u=a(16),d=a.n(u),m=a(20),b=a(17),p=a(15),h=a(2);var O=function(e){var t=e.message.uid===o.a.auth().currentUser.uid?"sent":"received",a=e.message.createdAt,c=new Date(1e3*a),s=c.getHours()+":"+c.getMinutes();return Object(h.jsx)("div",{children:Object(h.jsx)("div",{className:"message ".concat(t),children:Object(h.jsxs)("div",{className:"msg",children:[Object(h.jsx)("p",{style:{margin:"0",padding:"0.5rem",fontSize:"0.9rem"},children:e.message.msg}),Object(h.jsx)("small",{className:"msgTime",children:s})]})})})};var g=function(){var e=Object(c.useRef)(),t=o.a.auth(),a=Object(c.useState)(!1),s=Object(i.a)(a,2),n=s[0],r=s[1],l=Object(c.useState)(""),u=Object(i.a)(l,2),g=u[0],x=u[1],f=o.a.firestore().collection("chats"),v=f.orderBy("createdAt").limit(30),y=Object(j.a)(v,{idField:"id"}),N=Object(i.a)(y,1)[0],S=Object(c.useState)(null),w=Object(i.a)(S,2),I=(w[0],w[1]),C=Object(c.useState)(""),U=Object(i.a)(C,2),R=U[0],k=U[1],A=function(){var a=Object(m.a)(d.a.mark((function a(c){var s,n,r;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c.preventDefault(),s=t.currentUser,n=s.uid,r=s.photoURL,a.next=4,f.add({msg:g,createdAt:o.a.firestore.FieldValue.serverTimestamp(),uid:n,photoURL:r});case 4:x(""),e.current.scrollIntoView({behaviour:"smooth"});case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return Object(h.jsxs)("div",{children:[Object(h.jsxs)("main",{children:[N&&N.map((function(e,a){return Object(h.jsx)(O,{photoRef:t.currentUser.photoURL,message:e},a)})),Object(h.jsx)("div",{ref:e})]}),R&&alert("".concat(R)),Object(h.jsxs)("form",{onSubmit:A,children:[Object(h.jsxs)("label",{children:[Object(h.jsx)(b.a,{style:{fontSize:"1.5rem",cursor:"pointer"},className:"icon",icon:p.b}),Object(h.jsx)("input",{type:"file",onChange:function(e){var t=e.target.files[0];t&&["image/png","image/jpeg"].includes(t.type)?(I(t),k(null)):(I(null),k("You can only select png/jpeg file type"))}})]}),Object(h.jsx)("input",{className:"inputChat",value:g,type:"text",onChange:function(e){(g=e.target.value)?(x(g),r(!0)):(r(!1),x(""))},placeholder:"Type something..."}),Object(h.jsx)("button",{disabled:!n,className:"submitBtn",type:"submit",children:Object(h.jsx)(b.a,{icon:p.a,className:"sendImage"})})]})]})},x=a.p+"static/media/search.cadee8cd.png",f=a.p+"static/media/login.acff9e14.png";var v=function(){var e=o.a.auth();return Object(h.jsxs)("div",{className:"home",children:[Object(h.jsx)("img",{style:{height:"25rem",width:"30rem",margin:"1rem",borderRadius:"1rem"},src:f}),Object(h.jsxs)("div",{onClick:function(){var t=new o.a.auth.GoogleAuthProvider;e.signInWithPopup(t)},className:"sub-home",children:[Object(h.jsx)("img",{src:x,className:"googleIcon",alt:"sry"}),Object(h.jsx)("p",{children:"SignIn"})]})]})};var y=function(e){var t=o.a.auth(),a=Object(l.a)(t),c=Object(i.a)(a,1)[0];return Object(h.jsx)("div",{children:Object(h.jsxs)("div",{style:{display:"flex"},children:[Object(h.jsx)("img",{className:"profileImage",src:c.photoURL,alt:"sorry not available"}),Object(h.jsx)("p",{style:{color:"black"},children:c.displayName}),t.currentUser&&Object(h.jsx)("button",{className:"logoutBtn",onClick:function(){window.confirm("Are you sure you want to logout ".concat(c.displayName))&&t.signOut()},children:Object(h.jsx)(b.a,{style:{height:"1.5rem",width:"1.5rem",marginRight:"1rem"},icon:p.c})})]})})},N=a.p+"static/media/dummy.6472169e.png",S=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),a=t[0],s=t[1],n=o.a.auth(),r=Object(l.a)(n);Object(i.a)(r,1)[0];return o.a.firestore().collection("users").onSnapshot((function(e){s(e.docs.map((function(e){return e.data().displayname})))})),Object(h.jsx)("div",{children:a.map((function(e,t){return Object(h.jsxs)("div",{className:"user",children:[Object(h.jsx)("img",{className:"profileImage",src:N,alt:"sorry"}),Object(h.jsx)("p",{style:{marginLeft:"1rem",color:"black"},children:e})]},t)}))})};var w=function(){var e=o.a.auth(),t=Object(l.a)(e),a=Object(i.a)(t,1)[0];return Object(h.jsx)("div",{className:"container",children:a?Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)("div",{className:"allUsers",children:Object(h.jsx)(S,{})}),Object(h.jsxs)("div",{className:"userChat",children:[Object(h.jsx)("header",{children:Object(h.jsx)(y,{currentUser:a})}),Object(h.jsx)("section",{children:a?Object(h.jsx)(g,{}):Object(h.jsx)(v,{})})]})]}):Object(h.jsx)(v,{})})},I=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,41)).then((function(t){var a=t.getCLS,c=t.getFID,s=t.getFCP,n=t.getLCP,r=t.getTTFB;a(e),c(e),s(e),n(e),r(e)}))};r.a.render(Object(h.jsx)(s.a.StrictMode,{children:Object(h.jsx)(w,{})}),document.getElementById("root")),I()}},[[40,1,2]]]);
//# sourceMappingURL=main.b78eb1b0.chunk.js.map